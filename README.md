# TODO 桌面工具（Spark-Todo）

一个轻量的桌面 TODO 工具：采用「重要/紧急」四象限（艾森豪威尔矩阵）展示任务，支持本地持久化、置顶悬浮、隐藏已完成，并可切换列表/卡片视图。

## 功能

- 四象限：重要且紧急 / 重要不紧急 / 不重要但紧急 / 不重要不紧急
- 新增/编辑/删除任务；支持设置任务的「重要/紧急」与状态
- 隐藏已完成任务（可切换）
- 窗口置顶悬浮（可切换）
- **简洁模式**：无边框窗口，提供极简界面体验（可切换，需重启应用）
- 列表/卡片视图切换
- **自动更新检查**：启动时自动检查更新，支持手动检查和一键下载
- 喝水小提醒：启动时提示一次，之后每 2.5 小时提醒一次（系统弹窗，出现在屏幕中央）
- 本地 SQLite 存储

## 使用

- 新建任务：
  - 右下角 `+`
  - 各象限标题右侧 `+`（按象限创建任务；象限为空时会自动隐藏）
- 编辑任务：点击任务卡片/列表项
- 视图/设置：左上角 `≡` 打开菜单（当窗口宽/高任一 < 500 时菜单自动隐藏，恢复到 >= 500 时自动显示）
  - 切换卡片/列表视图
  - 开关隐藏已完成任务
  - 开关置顶悬浮
  - **开关简洁模式**（切换后自动重启应用）
  - **检查更新**（手动检查应用更新）
  - 退出应用
- 快捷：`Esc` 关闭弹窗或菜单；操作失败会出现 Toast 提示（点击可关闭）
- 窗口：默认 `450×300`，可拖拽象限标题或空白区域移动；`Alt+F4` 退出

## 数据存储

默认数据库路径（Windows）：

- `%APPDATA%\Spark-Todo\todo.db`

## 开发

1) 安装 Wails CLI（需要联网）：

`go install github.com/wailsapp/wails/v2/cmd/wails@latest`

2) 启动开发模式：

`wails dev`

更多架构与实现细节见：
- `docs/TECHNICAL.md` - 技术架构文档
- `docs/AUTO_UPDATE.md` - 自动更新功能文档

## 构建

`wails build`

构建产物默认在：

- `build/bin/todoP1.exe`

## 分发（推荐安装包）

单独分发 `todoP1.exe` 时，目标机器需已安装 `Microsoft Edge WebView2 Runtime`（Win10/11 多数自带）。

推荐使用 NSIS 安装包：安装时会检测 WebView2 Runtime，缺失则尝试安装；如果安装失败会打开官方下载安装页。

1) 安装 NSIS（确保 `makensis` 在 PATH 中）
2) 构建安装包：`wails build -nsis`
3) 分发安装包：`build/bin/todoP1-amd64-installer.exe`
